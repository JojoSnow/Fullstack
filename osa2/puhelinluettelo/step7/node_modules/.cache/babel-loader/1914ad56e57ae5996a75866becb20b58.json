{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\joksu\\\\Desktop\\\\Koulu\\\\Koodaus\\\\Fullstackopen\\\\osa2\\\\puhelinluettelo\\\\step7\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from'react';import personService from'./services/persons';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Filter=function Filter(props){return/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"filter shown with \",/*#__PURE__*/_jsx(\"input\",{value:props.filterName,onChange:props.handleFilterName})]})});};var PersonForm=function PersonForm(props){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:props.addPerson,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:props.newName,onChange:props.handleNameChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:props.newNum,onChange:props.handleNumChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]});};var Persons=function Persons(props){var persons=props.persons;var names=persons.filter(function(person){return person.name.toLowerCase().includes(props.filterName.toLowerCase());});return/*#__PURE__*/_jsx(_Fragment,{children:names.map(function(person){return/*#__PURE__*/_jsxs(\"p\",{children:[person.name,\" \",person.number,/*#__PURE__*/_jsx(\"button\",{id:person.id,onClick:props.handleNameDel,children:\"delete\"})]},person.id);})});};var Notification=function Notification(_ref){var message=_ref.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:message});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNum=_useState6[0],setNewNum=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filterName=_useState8[0],setFilterName=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];useEffect(function(){personService.getAll().then(function(response){setPersons(response);});},[]);var addPerson=function addPerson(event){event.preventDefault();var personObject={name:newName,number:newNum};var name=persons.filter(function(person){return person.name===newName;});if(newName.length!==0){if(name.length!==0){if(name[0].name===newName){// if (window.confirm(`${newName} is already added to Phonebook, replace the old number with a new one?`)) {\n//   axios\n//     .put(`http://localhost:3001/persons/${name[0].id}`, personObject)\n//   setNewName('');\n//   setNewNum('');\n//   setFilterName('');\n//   window.location.reload();\n// }\npersonService.update(name[0].id,personObject).then(function(error){setMessage(\"Changed \".concat(name[0].name,\" number\"));setTimeout(function(){setMessage(null);window.location.reload();},3000);setNewName('');setNewNum('');setFilterName('');});}}else{personService.create(personObject).then(function(response){setPersons(persons.concat(response));setMessage(\"Added \".concat(newName));setTimeout(function(){setMessage(null);window.location.reload();},3000);setNewName('');setNewNum('');setFilterName('');});}// axios\n//   .post('http://localhost:3001/persons', personObject)\n}};var handleNameDel=function handleNameDel(event){var id=event.target.id;var name=persons[id-1].name;personService.del(id).then(function(error){setMessage(\"Deleted \".concat(name));setTimeout(function(){setMessage(null);window.location.reload();},3000);});// if (window.confirm(`Delete ${name} ?`)) {\n// axios\n//   .delete(`http://localhost:3001/persons/${id}`);      \n// }\n};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumChange=function handleNumChange(event){setNewNum(event.target.value);};var handleFilterName=function handleFilterName(event){setFilterName(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{filterName:filterName,handleFilterName:handleFilterName}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newName:newName,handleNameChange:handleNameChange,newNum:newNum,handleNumChange:handleNumChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Persons,{persons:persons,filterName:filterName,handleNameDel:handleNameDel})})]});};export default App;","map":{"version":3,"sources":["C:/Users/joksu/Desktop/Koulu/Koodaus/Fullstackopen/osa2/puhelinluettelo/step7/src/App.js"],"names":["React","useEffect","useState","personService","axios","Filter","props","filterName","handleFilterName","PersonForm","addPerson","newName","handleNameChange","newNum","handleNumChange","Persons","persons","names","filter","person","name","toLowerCase","includes","map","number","id","handleNameDel","Notification","message","App","setPersons","setNewName","setNewNum","setFilterName","setMessage","getAll","then","response","event","preventDefault","personObject","length","update","error","setTimeout","window","location","reload","create","concat","target","del","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport personService from './services/persons';\nimport axios from 'axios';\n\nconst Filter = (props) => {\n  return (\n    <form>\n      <div>\n        filter shown with <input \n          value={props.filterName}\n          onChange={props.handleFilterName}\n        />\n      </div>\n    </form>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n        <div>\n          name: <input \n            value={props.newName}\n            onChange={props.handleNameChange}\n          />\n        </div>\n        <div>\n          number: <input \n            value={props.newNum}\n            onChange={props.handleNumChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n}\n\nconst Persons = (props) => {\n  const {persons} = props;\n  const names = persons.filter(person => \n    person.name.toLowerCase().includes(props.filterName.toLowerCase()));\n\n  return (\n      <>\n          {names.map(person =>\n              <p key={person.id}>\n                  {person.name} {person.number}\n                  <button \n                    id={person.id} \n                    onClick={props.handleNameDel} \n                  >\n                    delete\n                  </button>\n              </p>\n          )}\n      </>\n  )\n}\n\nconst Notification = ({message}) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]); \n  const [newName, setNewName] = useState('');\n  const [newNum, setNewNum] = useState('');\n  const [filterName, setFilterName] = useState('');\n  const [message, setMessage] = useState('');\n  \n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response);\n      });\n  }, []);\n  \n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNum,\n    };\n\n    const name = persons.filter(person => person.name === newName);\n\n    if (newName.length !== 0) {\n      if (name.length !== 0) {\n        if (name[0].name === newName) {\n          // if (window.confirm(`${newName} is already added to Phonebook, replace the old number with a new one?`)) {\n\n          //   axios\n          //     .put(`http://localhost:3001/persons/${name[0].id}`, personObject)\n            \n          //   setNewName('');\n          //   setNewNum('');\n          //   setFilterName('');\n            \n          //   window.location.reload();\n          // }\n\n          personService\n            .update(name[0].id, personObject)\n            .then(error => {\n              setMessage(\n                `Changed ${name[0].name} number`\n              )\n              setTimeout(() => {\n                setMessage(null)\n                window.location.reload()\n              }, 3000)\n              setNewName('');\n              setNewNum('');\n              setFilterName('');\n            })\n        }\n      } else {          \n        personService\n          .create(personObject)\n          .then(response => {\n            setPersons(persons.concat(response))\n            setMessage(\n              `Added ${newName}`\n            )\n            setTimeout(() => {\n              setMessage(null)\n              window.location.reload()\n            }, 3000)\n            setNewName('');\n            setNewNum('');\n            setFilterName('');\n          })\n          \n    } \n\n      // axios\n      //   .post('http://localhost:3001/persons', personObject)\n    }\n  }\n\n  const handleNameDel = (event) => {\n    const id = event.target.id;\n    const name = persons[id - 1].name;\n\n    personService\n        .del(id)\n        .then(error => {\n          setMessage(\n            `Deleted ${name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n            window.location.reload()\n          }, 3000);\n        })\n    \n    // if (window.confirm(`Delete ${name} ?`)) {\n      // axios\n      //   .delete(`http://localhost:3001/persons/${id}`);      \n    // }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumChange = (event) => {\n    setNewNum(event.target.value);\n  }\n\n  const handleFilterName = (event) => {\n    setFilterName(event.target.value);\n  }\n  \n  return (\n    <div>\n      <h1>Phonebook</h1>\n\n        <Notification message={message} />\n\n        <Filter filterName={filterName} handleFilterName={handleFilterName} />\n\n      <h2>Add a new</h2>\n\n        <PersonForm  addPerson={addPerson} \n          newName={newName} handleNameChange={handleNameChange} \n          newNum={newNum} handleNumChange={handleNumChange} \n        />\n\n      <h2>Numbers</h2>\n\n      <div>\n        <Persons persons={persons} filterName={filterName} handleNameDel={handleNameDel} />\n      </div>\n    </div>\n  );\n\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}