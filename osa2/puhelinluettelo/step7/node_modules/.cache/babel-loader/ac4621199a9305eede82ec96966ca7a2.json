{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\joksu\\\\Desktop\\\\Koulu\\\\Koodaus\\\\Fullstackopen\\\\osa2\\\\puhelinluettelo\\\\step7\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from'react';import personService from'./services/persons';import Person from'./components/Person.js';import{getNextKeyDef}from'@testing-library/user-event/dist/keyboard/getNextKeyDef';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Filter=function Filter(props){return/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"filter shown with \",/*#__PURE__*/_jsx(\"input\",{value:props.filterName,onChange:props.handleFilterName})]})});};var PersonForm=function PersonForm(props){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:props.addPerson,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:props.newName,onChange:props.handleNameChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:props.newNum,onChange:props.handleNumChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]});};var Notification=function Notification(_ref){var message=_ref.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:message});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNum=_useState6[0],setNewNum=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filterName=_useState8[0],setFilterName=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];useEffect(function(){personService.getAll().then(function(response){setPersons(response);});},[]);var addPerson=function addPerson(event){event.preventDefault();var personObject={name:newName,number:newNum};var name=persons.filter(function(person){return person.name===newName;});if(newName.length!==0){if(name.length!==0){if(name[0].name===newName){personService.update(name[0].id,personObject).then(function(error){setMessage(\"Changed \".concat(name[0].name,\" number\"));setTimeout(function(){setMessage(null);window.location.reload();},3000);setNewName('');setNewNum('');setFilterName('');});}}else{personService.create(personObject).then(function(response){setPersons(persons.concat(response));setMessage(\"Added \".concat(newName));setTimeout(function(){setMessage(null);window.location.reload();},3000);setNewName('');setNewNum('');setFilterName('');}).catch(function(error){console.log(error);setMessage(error.response.name,error.message);});}}};var handleNameDel=function handleNameDel(event){var id=event.target.id;var nameObject=persons.find(function(n){return n.id===id;});var name=nameObject.name;personService.del(id).then(function(error){setMessage(\"Deleted \".concat(name));setTimeout(function(){setMessage(null);window.location.reload();},3000);});};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumChange=function handleNumChange(event){setNewNum(event.target.value);};var handleFilterName=function handleFilterName(event){setFilterName(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{filterName:filterName,handleFilterName:handleFilterName}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newName:newName,handleNameChange:handleNameChange,newNum:newNum,handleNumChange:handleNumChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(\"div\",{children:persons.map(function(person){return/*#__PURE__*/_jsx(Person,{person:person,handleNameDel:handleNameDel},person.id);})})]});};export default App;","map":{"version":3,"sources":["C:/Users/joksu/Desktop/Koulu/Koodaus/Fullstackopen/osa2/puhelinluettelo/step7/src/App.js"],"names":["React","useEffect","useState","personService","Person","getNextKeyDef","Filter","props","filterName","handleFilterName","PersonForm","addPerson","newName","handleNameChange","newNum","handleNumChange","Notification","message","App","persons","setPersons","setNewName","setNewNum","setFilterName","setMessage","getAll","then","response","event","preventDefault","personObject","name","number","filter","person","length","update","id","error","setTimeout","window","location","reload","create","concat","catch","console","log","handleNameDel","target","nameObject","find","n","del","value","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport personService from './services/persons';\nimport Person from './components/Person.js';\nimport { getNextKeyDef } from '@testing-library/user-event/dist/keyboard/getNextKeyDef';\n\nconst Filter = (props) => {\n  return (\n    <form>\n      <div>\n        filter shown with <input \n          value={props.filterName}\n          onChange={props.handleFilterName}\n        />\n      </div>\n    </form>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n        <div>\n          name: <input \n            value={props.newName}\n            onChange={props.handleNameChange}\n          />\n        </div>\n        <div>\n          number: <input \n            value={props.newNum}\n            onChange={props.handleNumChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n}\n\nconst Notification = ({message}) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]); \n  const [newName, setNewName] = useState('');\n  const [newNum, setNewNum] = useState('');\n  const [filterName, setFilterName] = useState('');\n  const [message, setMessage] = useState('');\n  \n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response);\n      });\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNum,\n    };\n\n    const name = persons.filter(person => person.name === newName);\n\n    if (newName.length !== 0) {\n      if (name.length !== 0) {\n        if (name[0].name === newName) {\n          personService\n            .update(name[0].id, personObject)\n            .then(error => {\n              setMessage(\n                `Changed ${name[0].name} number`\n              )\n              setTimeout(() => {\n                setMessage(null)\n                window.location.reload()\n              }, 3000)\n              setNewName('');\n              setNewNum('');\n              setFilterName('');\n            })\n        }\n      } else {          \n        personService\n          .create(personObject)\n          .then(response => {\n            setPersons(persons.concat(response))\n            setMessage(\n              `Added ${newName}`\n            )\n            setTimeout(() => {\n              setMessage(null)\n              window.location.reload()\n            }, 3000)\n            setNewName('');\n            setNewNum('');\n            setFilterName('');\n          })\n          .catch(error => {\n            console.log(error)\n            setMessage(error.response.name, error.message)\n          })\n          \n      } \n    }\n  }\n\n  const handleNameDel = (event) => {\n    const id = event.target.id;\n    const nameObject = persons.find(n => n.id === id)\n    const name = nameObject.name\n\n    personService\n        .del(id)\n        .then(error => {\n          setMessage(\n            `Deleted ${name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n            window.location.reload()\n          }, 3000);\n        })\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumChange = (event) => {\n    setNewNum(event.target.value);\n  }\n\n  const handleFilterName = (event) => {\n    setFilterName(event.target.value);\n  }\n  \n  return (\n    <div>\n      <h1>Phonebook</h1>\n\n        <Notification message={message} />\n\n        <Filter filterName={filterName} handleFilterName={handleFilterName} />\n\n      <h2>Add a new</h2>\n\n        <PersonForm  addPerson={addPerson} \n          newName={newName} handleNameChange={handleNameChange} \n          newNum={newNum} handleNumChange={handleNumChange} \n        />\n\n      <h2>Numbers</h2>\n\n      <div>\n        {persons.map(person =>\n          <Person \n            key={person.id} \n            person={person} \n            handleNameDel={handleNameDel} \n          />\n        )}\n        \n      </div>\n    </div>\n  );\n\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}