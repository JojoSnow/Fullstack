{"version":3,"sources":["components/Blog.js","components/BlogForm.js","services/login.js","services/blogs.js","components/LoginForm.js","components/Togglable.js","reducers/blogReducer.js","App.js","store.js","index.js"],"names":["Blog","blog","addLikes","removeBlog","useState","visible","setVisible","loggedUser","localStorage","getItem","JSONuser","JSON","stringify","user","parse","finalUser","hideWhenVisible","display","showWhenVisible","toggleVisibility","style","padding","border","borderWidth","marginBottom","id","title","author","onClick","className","url","likes","name","username","message","window","confirm","BlogForm","createBlog","setTitle","setAuthor","setUrl","onSubmit","event","preventDefault","htmlFor","type","value","onChange","target","login","credentials","a","axios","post","response","data","baseUrl","token","getAll","request","get","create","newBlog","config","headers","Authorization","update","newObject","put","del","delete","setToken","newToken","LoginForm","setUsername","password","setPassword","handleLogin","loginService","newUser","setItem","blogService","console","log","Togglable","forwardRef","props","ref","useImperativeHandle","buttonLabel","children","displayName","blogSlice","createSlice","initialState","reducers","setBlogs","state","action","payload","appendBlog","push","addLike","actions","content","dispatch","likeBlog","updatedBlog","App","useDispatch","useEffect","blogs","useSelector","setUser","blogFormRef","useRef","loggedUserJSON","addBlog","blogObject","current","delBlog","catch","error","removeItem","map","store","configureStore","reducer","blogReducer","ReactDOM","render","document","getElementById"],"mappings":"4MA0EeA,EAvEF,SAAC,GAAkC,IAAjCC,EAAgC,EAAhCA,KAAMC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,WAC9B,EAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACMC,EAAaC,aAAaC,QAAQ,kBAClCC,EAAWC,KAAKC,UAAUL,GAC1BM,EAAOF,KAAKG,MAAMJ,GAClBK,EAAYJ,KAAKG,MAAMD,GASvBG,EAAkB,CAACC,QAASZ,EAAU,OAAS,IAC/Ca,EAAkB,CAACD,QAASZ,EAAU,GAAK,QAE3Cc,EAAmB,WACxBb,GAAYD,IAsBb,OACC,sBAAKe,MAlCY,CACjBC,QAAS,EACTC,OAAQ,QACRC,YAAa,EACbC,aAAc,GA8BSC,GAAIxB,EAAKwB,GAAhC,UACC,sBAAKL,MAAOJ,EAAZ,UACC,8BACEf,EAAKyB,MADP,IACezB,EAAK0B,UAEpB,wBAAQC,QAAST,EAAjB,qBAED,sBAAKC,MAAOF,EAAiBW,UAAU,mBAAvC,UACC,8BACE5B,EAAKyB,MADP,OACkBzB,EAAK0B,OAAQ,OAE/B,wBAAQC,QAAST,EAAjB,kBACA,4BAAIlB,EAAK6B,MACT,uCAAU7B,EAAK8B,SACf,wBAAQH,QAlCK,WACf,IAAMG,EAAS9B,EAAK8B,OAAS,EACvBN,EAAKxB,EAAKwB,GAChBvB,EAASuB,EAAI,CACZZ,KAAMZ,EAAKY,KAAKY,GAChBM,MAAOA,EACPJ,OAAQ1B,EAAK0B,OACbD,MAAOzB,EAAKyB,MACZI,IAAK7B,EAAK6B,OA0BT,kBACA,4BAAI7B,EAAKY,KAAKmB,OACbjB,EAAUkB,WAAahC,EAAKY,KAAKoB,SACjC,wBAAQL,QAzBI,WACf,IAAMM,EAAO,sBAAkBjC,EAAKyB,MAAvB,eAAmCzB,EAAK0B,OAAxC,KACTQ,OAAOC,QAAQF,IAClB/B,EAAWF,EAAKwB,KAsBd,oBAEA,UCDUY,EA3DE,SAAC,GAAkB,IAAjBC,EAAgB,EAAhBA,WAClB,EAA0BlC,mBAAS,IAAnC,mBAAOsB,EAAP,KAAca,EAAd,KACA,EAA4BnC,mBAAS,IAArC,mBAAOuB,EAAP,KAAea,EAAf,KACA,EAAsBpC,mBAAS,IAA/B,mBAAO0B,EAAP,KAAYW,EAAZ,KAeA,OACC,uBAAMC,SAdS,SAAAC,GACfA,EAAMC,iBACNN,EAAW,CACVZ,MAAOA,EACPC,OAAQA,EACRG,IAAKA,IAGNS,EAAS,IACTC,EAAU,IACVC,EAAO,KAIP,UACC,4CACA,uBAAOI,QAAQ,QAAf,oBACA,uBACCC,KAAK,OACLC,MAAOrB,EACPM,KAAK,QACLP,GAAG,QACHuB,SAAU,gBAAEC,EAAF,EAAEA,OAAF,OAAcV,EAASU,EAAOF,UACtC,IACH,uBACA,uBAAOF,QAAQ,SAAf,qBACA,uBACCC,KAAK,OACLC,MAAOpB,EACPK,KAAK,SACLP,GAAG,SACHuB,SAAU,gBAAEC,EAAF,EAAEA,OAAF,OAAcT,EAAUS,EAAOF,UACvC,IACH,uBACA,uBAAOF,QAAQ,MAAf,kBACA,uBACCC,KAAK,OACLC,MAAOjB,EACPE,KAAK,MACLP,GAAG,MACHuB,SAAU,gBAAEC,EAAF,EAAEA,OAAF,OAAcR,EAAOQ,EAAOF,UACpC,IACH,uBACA,wBAAQD,KAAK,SAASrB,GAAG,aAAzB,wB,gBChDGyB,EAAK,uCAAG,WAAMC,GAAN,eAAAC,EAAA,sEACUC,IAAMC,KAHd,aAG4BH,GAD9B,cACPI,EADO,yBAENA,EAASC,MAFH,2CAAH,sDAKI,GAACN,SCPVO,EAAU,aAEZC,EAAQ,KAMNC,EAAM,uCAAG,8BAAAP,EAAA,6DACRQ,EAAUP,IAAMQ,IAAIJ,GADZ,SAESG,EAFT,cAERL,EAFQ,yBAGPA,EAASC,MAHF,2CAAH,qDAMNM,EAAM,uCAAG,WAAMC,GAAN,iBAAAX,EAAA,6DACRY,EAAS,CACdC,QAAS,CAACC,cAAeR,IAFZ,SAISL,IAAMC,KAAKG,EAASM,EAASC,GAJtC,cAIRT,EAJQ,yBAKPA,EAASC,MALF,2CAAH,sDAQNW,EAAM,uCAAG,WAAO1C,EAAI2C,GAAX,iBAAAhB,EAAA,6DACRQ,EAAUP,IAAMgB,IAAN,UAAaZ,EAAb,YAAwBhC,GAAM2C,GADhC,SAESR,EAFT,cAERL,EAFQ,yBAGPA,EAASC,MAHF,2CAAH,wDAMNc,EAAG,uCAAG,WAAM7C,GAAN,mBAAA2B,EAAA,6DACLY,EAAS,CACdC,QAAS,CAACC,cAAeR,IAEpBE,EAAUP,IAAMkB,OAAN,UAAgBd,EAAhB,YAA2BhC,GAAMuC,GAJtC,SAKYJ,EALZ,cAKLL,EALK,yBAMJA,EAASC,MANL,2CAAH,sDASM,GAACG,SAAQG,SAAQK,SAAQG,MAAKE,SAjC5B,SAAAC,GAChBf,EAAK,iBAAae,KCiDJC,EAnDG,SAAC,GAAa,IAAZxB,EAAW,EAAXA,MACnB,EAAgC9C,mBAAS,IAAzC,mBAAO6B,EAAP,KAAiB0C,EAAjB,KACA,EAAgCvE,mBAAS,IAAzC,mBAAOwE,EAAP,KAAiBC,EAAjB,KAEMC,EAAW,uCAAG,WAAMnC,GAAN,eAAAS,EAAA,6DACnBT,EAAMC,iBADa,kBAIImC,EAAa7B,MAAM,CAACjB,WAAU2C,aAJlC,OAIZI,EAJY,OAMlBxE,aAAayE,QAAQ,iBAAkBtE,KAAKC,UAAUoE,IAEtDE,EAAYV,SAASQ,EAAQtB,OAC7BR,EAAM8B,GACNL,EAAY,IACZE,EAAY,IAXM,kDAalBM,QAAQC,IAAI,qBAbM,0DAAH,sDAiBjB,OACC,uBAAM3D,GAAG,YAAYiB,SAAUoC,EAA/B,UACC,uDACA,2CAEC,uBACChC,KAAK,OACLC,MAAOd,EACPD,KAAK,WACLP,GAAG,WACHuB,SAAU,gBAAEC,EAAF,EAAEA,OAAF,OAAc0B,EAAY1B,EAAOF,aAG7C,2CAEC,uBACCD,KAAK,WACLC,MAAO6B,EACP5C,KAAK,WACLP,GAAG,WACHuB,SAAU,gBAAEC,EAAF,EAAEA,OAAF,OAAc4B,EAAY5B,EAAOF,aAG7C,wBAAQD,KAAK,SAASrB,GAAG,WAAzB,uBC9CG4D,EAAYC,sBAAW,SAACC,EAAOC,GACpC,MAA8BpF,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAEMU,EAAkB,CAACC,QAASZ,EAAU,OAAS,IAC/Ca,EAAkB,CAACD,QAASZ,EAAU,GAAK,QAE3Cc,EAAmB,WACxBb,GAAYD,IAOb,OAJAoF,8BAAoBD,GAAK,WACxB,MAAO,CAACrE,uBAIR,gCACC,qBAAKC,MAAOJ,EAAZ,SACC,wBAAQY,QAAST,EAAjB,SAAoCoE,EAAMG,gBAE3C,sBAAKtE,MAAOF,EAAZ,UACEqE,EAAMI,SACP,wBAAQ/D,QAAST,EAAjB,6BAMJkE,EAAUO,YAAc,YAETP,Q,QC1BTQ,EAAYC,YAAY,CAC7B9D,KAAM,QACN+D,aAJoB,GAKpBC,SAAU,CACTC,SADS,SACAC,EAAOC,GACf,OAAOA,EAAOC,SAEfC,WAJS,SAIEH,EAAOC,GACjBD,EAAMI,KAAKH,EAAOC,UAEnBG,QAPS,SAODL,EAAOC,GACdhB,QAAQC,IAAIc,GACZf,QAAQC,IAAIe,EAAOC,aAKf,EAAwCP,EAAUW,QAA3CP,EAAP,EAAOA,SAAUI,EAAjB,EAAiBA,WAAYE,EAA7B,EAA6BA,QASvBjE,EAAa,SAAAmE,GACzB,8CAAO,WAAMC,GAAN,eAAAtD,EAAA,sEACgB8B,EAAYpB,OAAO2C,GADnC,OACA1C,EADA,OAEN2C,EAASL,EAAWtC,IAFd,2CAAP,uDAMY4C,EAAW,SAAAF,GACvB,8CAAO,WAAMC,GAAN,eAAAtD,EAAA,sEACoB8B,EAAYf,OAAOsC,GADvC,OACAG,EADA,OAENF,EAASH,EAAQK,IAFX,2CAAP,uDAMcf,IAAf,QCoDegB,EAvFH,WAEX,IAAMH,EAAWI,cAEjBC,qBAAU,WACTL,EDUD,uCAAO,WAAMA,GAAN,eAAAtD,EAAA,sEACc8B,EAAYvB,SAD1B,OACAqD,EADA,OAENN,EAAST,EAASe,IAFZ,2CAAP,yDCTG,CAACN,IAEJ,IAAMM,EAAQC,aAAY,SAAAf,GAAK,OAAIA,EAAMc,SACzC,EAAwB5G,mBAAS,MAAjC,mBAAOS,EAAP,KAAaqG,EAAb,KACMC,EAAcC,mBAGpBL,qBAAU,WACT,IAAMM,EAAiB7G,aAAaC,QAAQ,kBAC5C,GAAI4G,EAAgB,CACnB,IAAM9G,EAAaI,KAAKG,MAAMuG,GAC9BH,EAAQ3G,GACR2E,EAAYV,SAASjE,EAAWmD,UAE/B,IAEH,IASM4D,EAAO,uCAAG,WAAMC,GAAN,SAAAnE,EAAA,sDACf+D,EAAYK,QAAQrG,mBACpBuF,EAASpE,EAAWiF,IAFL,2CAAH,sDAKPE,EAAO,uCAAG,WAAMhG,GAAN,SAAA2B,EAAA,sEACT8B,EAAYZ,IAAI7C,GAAIiG,OAAM,SAAAC,GAAK,OAAIxC,QAAQC,IAAIuC,MADtC,2CAAH,sDAIPpB,EAAO,uCAAG,WAAO9E,EAAI8F,GAAX,SAAAnE,EAAA,sDACfsD,EAASC,EAASlF,IADH,2CAAH,wDAyBb,OACC,8BACW,OAATZ,EACA,cAAC,EAAD,CAAWqC,MA9CM,SAAA8B,GACnBkC,EAAQlC,MA+CN,gCACC,uCACA,8BACEnE,EAAKmB,KADP,aACuB,IACtB,wBAAQP,GAAG,YAAYG,QAhDP,WACpBpB,aAAaoH,WAAW,kBACxBV,EAAQ,OA8CJ,uBA7BJ,cAAC,EAAD,CAAWxB,YAAY,kBAAkBF,IAAK2B,EAA9C,SACC,cAAC,EAAD,CAAU7E,WAAYgF,MAKvB,8BACEN,EAECa,KAAI,SAAA5H,GAAI,OACR,cAAC,EAAD,CAECA,KAAMA,EACNC,SAAUqG,EACVpG,WAAYsH,GAHPxH,EAAKwB,eCxDDqG,EANDC,YAAe,CAC5BC,QAAS,CACRhB,MAAOiB,KCATC,IAASC,OACR,cAAC,IAAD,CAAUL,MAAOA,EAAjB,SACC,cAAC,EAAD,MAEDM,SAASC,eAAe,W","file":"static/js/main.bfdf034e.chunk.js","sourcesContent":["import React, {useState} from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Blog = ({blog, addLikes, removeBlog}) => {\r\n\tconst [visible, setVisible] = useState(false)\r\n\tconst loggedUser = localStorage.getItem('loggedBlogUser')\r\n\tconst JSONuser = JSON.stringify(loggedUser)\r\n\tconst user = JSON.parse(JSONuser)\r\n\tconst finalUser = JSON.parse(user)\r\n\r\n\tconst blogStyle = {\r\n\t\tpadding: 5,\r\n\t\tborder: 'solid',\r\n\t\tborderWidth: 1,\r\n\t\tmarginBottom: 5,\r\n\t}\r\n\r\n\tconst hideWhenVisible = {display: visible ? 'none' : ''}\r\n\tconst showWhenVisible = {display: visible ? '' : 'none'}\r\n\r\n\tconst toggleVisibility = () => {\r\n\t\tsetVisible(!visible)\r\n\t}\r\n\r\n\tconst addLike = () => {\r\n\t\tconst likes = (blog.likes += 1)\r\n\t\tconst id = blog.id\r\n\t\taddLikes(id, {\r\n\t\t\tuser: blog.user.id,\r\n\t\t\tlikes: likes,\r\n\t\t\tauthor: blog.author,\r\n\t\t\ttitle: blog.title,\r\n\t\t\turl: blog.url,\r\n\t\t})\r\n\t}\r\n\r\n\tconst delBlog = () => {\r\n\t\tconst message = `Remove blog ${blog.title} by ${blog.author}?`\r\n\t\tif (window.confirm(message)) {\r\n\t\t\tremoveBlog(blog.id)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div style={blogStyle} id={blog.id}>\r\n\t\t\t<div style={hideWhenVisible}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{blog.title} {blog.author}\r\n\t\t\t\t</p>\r\n\t\t\t\t<button onClick={toggleVisibility}>View</button>\r\n\t\t\t</div>\r\n\t\t\t<div style={showWhenVisible} className=\"togglableContent\">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{blog.title} by {blog.author}{' '}\r\n\t\t\t\t</p>\r\n\t\t\t\t<button onClick={toggleVisibility}>Hide</button>\r\n\t\t\t\t<p>{blog.url}</p>\r\n\t\t\t\t<p>likes {blog.likes}</p>\r\n\t\t\t\t<button onClick={addLike}>Like</button>\r\n\t\t\t\t<p>{blog.user.name}</p>\r\n\t\t\t\t{finalUser.username === blog.user.username ? (\r\n\t\t\t\t\t<button onClick={delBlog}>Remove</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t''\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nBlog.propTypes = {\r\n\tblog: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default Blog\r\n","import React, {useState} from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst BlogForm = ({createBlog}) => {\r\n\tconst [title, setTitle] = useState('')\r\n\tconst [author, setAuthor] = useState('')\r\n\tconst [url, setUrl] = useState('')\r\n\r\n\tconst addBlog = event => {\r\n\t\tevent.preventDefault()\r\n\t\tcreateBlog({\r\n\t\t\ttitle: title,\r\n\t\t\tauthor: author,\r\n\t\t\turl: url,\r\n\t\t})\r\n\r\n\t\tsetTitle('')\r\n\t\tsetAuthor('')\r\n\t\tsetUrl('')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form onSubmit={addBlog}>\r\n\t\t\t<h2>create new</h2>\r\n\t\t\t<label htmlFor=\"Title\">Title:</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tvalue={title}\r\n\t\t\t\tname=\"Title\"\r\n\t\t\t\tid=\"title\"\r\n\t\t\t\tonChange={({target}) => setTitle(target.value)}\r\n\t\t\t/>{' '}\r\n\t\t\t<br />\r\n\t\t\t<label htmlFor=\"Author\">Author:</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tvalue={author}\r\n\t\t\t\tname=\"Author\"\r\n\t\t\t\tid=\"author\"\r\n\t\t\t\tonChange={({target}) => setAuthor(target.value)}\r\n\t\t\t/>{' '}\r\n\t\t\t<br />\r\n\t\t\t<label htmlFor=\"Url\">Url:</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tvalue={url}\r\n\t\t\t\tname=\"Url\"\r\n\t\t\t\tid=\"url\"\r\n\t\t\t\tonChange={({target}) => setUrl(target.value)}\r\n\t\t\t/>{' '}\r\n\t\t\t<br />\r\n\t\t\t<button type=\"submit\" id=\"createBtns\">\r\n\t\t\t\tCreate\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nBlogForm.propTypes = {\r\n\tcreateBlog: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default BlogForm\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n\tconst response = await axios.post(baseUrl, credentials)\r\n\treturn response.data\r\n}\r\n\r\nexport default {login}\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n\ttoken = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = async () => {\r\n\tconst request = axios.get(baseUrl)\r\n\tconst response = await request\r\n\treturn response.data\r\n}\r\n\r\nconst create = async newBlog => {\r\n\tconst config = {\r\n\t\theaders: {Authorization: token},\r\n\t}\r\n\tconst response = await axios.post(baseUrl, newBlog, config)\r\n\treturn response.data\r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n\tconst request = axios.put(`${baseUrl}/${id}`, newObject)\r\n\tconst response = await request\r\n\treturn response.data\r\n}\r\n\r\nconst del = async id => {\r\n\tconst config = {\r\n\t\theaders: {Authorization: token},\r\n\t}\r\n\tconst request = axios.delete(`${baseUrl}/${id}`, config)\r\n\tconst response = await request\r\n\treturn response.data\r\n}\r\n\r\nexport default {getAll, create, update, del, setToken}\r\n","import React, {useState} from 'react'\r\nimport loginService from '../services/login'\r\nimport blogService from '../services/blogs'\r\n\r\nconst LoginForm = ({login}) => {\r\n\tconst [username, setUsername] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\r\n\tconst handleLogin = async event => {\r\n\t\tevent.preventDefault()\r\n\r\n\t\ttry {\r\n\t\t\tconst newUser = await loginService.login({username, password})\r\n\r\n\t\t\tlocalStorage.setItem('loggedBlogUser', JSON.stringify(newUser))\r\n\r\n\t\t\tblogService.setToken(newUser.token)\r\n\t\t\tlogin(newUser)\r\n\t\t\tsetUsername('')\r\n\t\t\tsetPassword('')\r\n\t\t} catch (exception) {\r\n\t\t\tconsole.log('wrong credentials')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form id=\"loginForm\" onSubmit={handleLogin}>\r\n\t\t\t<h2>log in to application</h2>\r\n\t\t\t<div>\r\n\t\t\t\tusername\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tvalue={username}\r\n\t\t\t\t\tname=\"Username\"\r\n\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\tonChange={({target}) => setUsername(target.value)}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\tpassword\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t\tname=\"Password\"\r\n\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\tonChange={({target}) => setPassword(target.value)}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<button type=\"submit\" id=\"loginBtn\">\r\n\t\t\t\tLogin\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default LoginForm\r\n","import React, {useState, useImperativeHandle, forwardRef} from 'react'\r\n\r\nconst Togglable = forwardRef((props, ref) => {\r\n\tconst [visible, setVisible] = useState(false)\r\n\r\n\tconst hideWhenVisible = {display: visible ? 'none' : ''}\r\n\tconst showWhenVisible = {display: visible ? '' : 'none'}\r\n\r\n\tconst toggleVisibility = () => {\r\n\t\tsetVisible(!visible)\r\n\t}\r\n\r\n\tuseImperativeHandle(ref, () => {\r\n\t\treturn {toggleVisibility}\r\n\t})\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div style={hideWhenVisible}>\r\n\t\t\t\t<button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n\t\t\t</div>\r\n\t\t\t<div style={showWhenVisible}>\r\n\t\t\t\t{props.children}\r\n\t\t\t\t<button onClick={toggleVisibility}>Cancel</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n})\r\n\r\nTogglable.displayName = 'Togglable'\r\n\r\nexport default Togglable\r\n","import {createSlice} from '@reduxjs/toolkit'\r\nimport blogService from '../services/blogs'\r\n\r\nconst initialState = []\r\n\r\nconst blogSlice = createSlice({\r\n\tname: 'blogs',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetBlogs(state, action) {\r\n\t\t\treturn action.payload\r\n\t\t},\r\n\t\tappendBlog(state, action) {\r\n\t\t\tstate.push(action.payload)\r\n\t\t},\r\n\t\taddLike(state, action) {\r\n\t\t\tconsole.log(state)\r\n\t\t\tconsole.log(action.payload)\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport const {setBlogs, appendBlog, addLike} = blogSlice.actions\r\n\r\nexport const initializeBlogs = () => {\r\n\treturn async dispatch => {\r\n\t\tconst blogs = await blogService.getAll()\r\n\t\tdispatch(setBlogs(blogs))\r\n\t}\r\n}\r\n\r\nexport const createBlog = content => {\r\n\treturn async dispatch => {\r\n\t\tconst newBlog = await blogService.create(content)\r\n\t\tdispatch(appendBlog(newBlog))\r\n\t}\r\n}\r\n\r\nexport const likeBlog = content => {\r\n\treturn async dispatch => {\r\n\t\tconst updatedBlog = await blogService.update(content)\r\n\t\tdispatch(addLike(updatedBlog))\r\n\t}\r\n}\r\n\r\nexport default blogSlice.reducer","import React, {useState, useEffect, useRef} from 'react'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport Blog from './components/Blog'\r\nimport BlogForm from './components/BlogForm'\r\nimport LoginForm from './components/LoginForm'\r\nimport Togglable from './components/Togglable'\r\nimport blogService from './services/blogs'\r\n\r\nimport {initializeBlogs, createBlog, likeBlog} from './reducers/blogReducer'\r\n\r\nconst App = () => {\r\n\r\n\tconst dispatch = useDispatch()\r\n\t\r\n\tuseEffect(() => {\r\n\t\tdispatch(initializeBlogs())\r\n\t}, [dispatch])\r\n\r\n\tconst blogs = useSelector(state => state.blogs)\r\n\tconst [user, setUser] = useState(null)\r\n\tconst blogFormRef = useRef()\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tconst loggedUserJSON = localStorage.getItem('loggedBlogUser')\r\n\t\tif (loggedUserJSON) {\r\n\t\t\tconst loggedUser = JSON.parse(loggedUserJSON)\r\n\t\t\tsetUser(loggedUser)\r\n\t\t\tblogService.setToken(loggedUser.token)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst handleLogin = newUser => {\r\n\t\tsetUser(newUser)\r\n\t}\r\n\r\n\tconst handleLogout = () => {\r\n\t\tlocalStorage.removeItem('loggedBlogUser')\r\n\t\tsetUser(null)\r\n\t}\r\n\r\n\tconst addBlog = async blogObject => {\r\n\t\tblogFormRef.current.toggleVisibility()\r\n\t\tdispatch(createBlog(blogObject))\r\n\t}\r\n\r\n\tconst delBlog = async id => {\r\n\t\tawait blogService.del(id).catch(error => console.log(error))\r\n\t}\r\n\r\n\tconst addLike = async (id, blogObject) => {\r\n\t\tdispatch(likeBlog(id, blogObject))\r\n\t}\r\n\r\n\tconst blogForm = () => (\r\n\t\t<Togglable buttonLabel=\"Create New Blog\" ref={blogFormRef}>\r\n\t\t\t<BlogForm createBlog={addBlog} />\r\n\t\t</Togglable>\r\n\t)\r\n\r\n\tconst blogsDiv = () => (\r\n\t\t<div>\r\n\t\t\t{blogs\r\n\t\t\t\t// .sort((a, b) => a.likes + b.likes)\r\n\t\t\t\t.map(blog => (\r\n\t\t\t\t\t<Blog\r\n\t\t\t\t\t\tkey={blog.id}\r\n\t\t\t\t\t\tblog={blog}\r\n\t\t\t\t\t\taddLikes={addLike}\r\n\t\t\t\t\t\tremoveBlog={delBlog}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{user === null ? (\r\n\t\t\t\t<LoginForm login={handleLogin} />\r\n\t\t\t) : (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>blogs</h2>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{user.name} logged in{' '}\r\n\t\t\t\t\t\t<button id=\"logoutBtn\" onClick={handleLogout}>\r\n\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t{blogForm()}\r\n\t\t\t\t\t{blogsDiv()}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default App\r\n","import {configureStore} from '@reduxjs/toolkit'\r\n\r\nimport blogReducer from './reducers/blogReducer'\r\n\r\nconst store = configureStore({\r\n\treducer: {\r\n\t\tblogs: blogReducer\r\n\t}\r\n})\r\n\r\nexport default store","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Provider} from 'react-redux'\r\nimport App from './App'\r\nimport store from './store'\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n)"],"sourceRoot":""}